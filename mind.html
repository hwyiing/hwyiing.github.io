<html>

<head>
  <link rel="shortcut icon" href="./favicon/favicon.ico">
  <link rel="icon" type="image/gif" href="./favicon/animated_favicon1.gif">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes">
  <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.0.0/dist/mindar-image.prod.js"></script>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.0.0/dist/mindar-image-aframe.prod.js"></script>
  <script>

    document.addEventListener("DOMContentLoaded", function () {

      const sceneEl = document.querySelector('a-scene');
      const arSystem = sceneEl.systems["mindar-image-system"];

      // arReady event triggered when ready
      sceneEl.addEventListener("arReady", (event) => {
        console.log("MindAR is ready")
      });

      // arError event triggered when something went wrong. Mostly browser compatbility issue
      sceneEl.addEventListener("arError", (event) => {
        console.log("MindAR failed to start")
      });

    });

    window.addEventListener("load", function () {
      const myTarget = document.querySelector('#target');
      const myPlane = document.querySelector('#plane');
      const myTarget1 = document.querySelector('#target-1');
      const myPlane1 = document.querySelector('#plane-1');
      const myTarget2 = document.querySelector('#target-2');
      const myPlane2 = document.querySelector('#plane-2');
      const myTarget3 = document.querySelector('#target-3');
      const myPlane3 = document.querySelector('#plane-3');

      //detect target found
      myTarget.addEventListener("targetFound", event => {
        console.log("target found");
        // detect click event
        myPlane.addEventListener("click", event => {
          console.log("plane click");
          var v = document.querySelector('#vid');
          v.play();
        });
      });

      myTarget.addEventListener("targetLost", event => {
        var v = document.querySelector('#vid');
        if (v){
          v.pause();
        }        
      });

      myTarget1.addEventListener("targetFound", event => {
        console.log("target 1 found");
        // detect click event
        myPlane1.addEventListener("click", event => {
          console.log("plane 1 click");
          var v = document.querySelector('#vid1');
          v.play();
        });
      });

      myTarget1.addEventListener("targetLost", event => {
        var v = document.querySelector('#vid1');
        if (v){
          v.pause();
        }        
      });

      myTarget2.addEventListener("targetFound", event => {
        console.log("target 2 found");
        // detect click event
        myPlane2.addEventListener("click", event => {
          console.log("plane 2 click");
          var v = document.querySelector('#vid2');
          v.play();
        });
      });

      myTarget2.addEventListener("targetLost", event => {
        var v = document.querySelector('#vid2');
        if (v){
          v.pause();
        }        
      });

      myTarget3.addEventListener("targetFound", event => {
        console.log("target 3 found");
        // detect click event
        myPlane3.addEventListener("click", event => {
          console.log("plane 3 click");
          var v = document.querySelector('#vid3');
          v.play();
        });
      });

      myTarget3.addEventListener("targetLost", event => {
        var v = document.querySelector('#vid3');
        if (v){
          v.pause();
        }        
      });
    });

  </script>
</head>

<body>
  <a-scene mindar-image="imageTargetSrc: ./targets-2.mind;" color-space="sRGB"
    renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false">
    <a-assets>
      <video id="vid" src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1641141809/thaiVideo.mp4"
        crossorigin="anonymous">
      </video>
      <video id="vid1" src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1641141778/thaiVideo1.mp4"
        crossorigin="anonymous">
      </video>
      <video id="vid2"
        src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1642576736/video-output-5FAB095C-576E-4307-AAF0-F893EE07DA12_jpr7wl.mov"
        crossorigin="anonymous">
      </video>
      <video id="vid3" src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1642576284/thaiVideo3.mp4"
        crossorigin="anonymous">
      </video>

    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;"
      raycaster="far: 10000; objects: .clickable"></a-camera>

    <a-entity id="target" mindar-image-target="targetIndex: 0">
      <a-plane id="plane" class="clickable" src="#vid" scale="1.5 1.5 1.5" position="0 0 0"
        rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target-1" mindar-image-target="targetIndex: 1">
      <a-plane id="plane-1" class="clickable" src="#vid1" scale="1.5 1.5 1.5" position="0 0 0"
        rotation="0 0 0"></a-plane>
    </a-entity>
    <a-entity id="target-2" mindar-image-target="targetIndex: 2">
      <a-plane id="plane-2" class="clickable" src="#vid2" scale="1.5 1.5 1.5" position="0 0 0" rotation="0 0 0">
      </a-plane>
    </a-entity>
    <a-entity id="target-3" mindar-image-target="targetIndex: 3">
      <a-plane id="plane-3" class="clickable" src="#vid3" scale="1.5 1.5 1.5" position="0 0 0" rotation="0 0 0">
      </a-plane>
    </a-entity>


  </a-scene>
</body>

</html>

<!-- <body>
  <a-scene mindar-image="imageTargetSrc: ./targets.mind;" color-space="sRGB"
    renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false"
    device-orientation-permission-ui="enabled: false">
    <a-assets>
      Â <video id="vid2"
        src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1641141778/original-9D92B4C7-76C9-4952-99F9-491DE7924EEF_ms5gu7.mp4"
        crossorigin="anonymous">
      </video>

      <video id="vid1" src="https://res.cloudinary.com/daqm1fsjr/video/upload/v1641141809/Video1_xjrzlx.mp4"
        crossorigin="anonymous">
      </video>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;"
      raycaster="far: 10000; objects: .clickable"></a-camera>

    <a-entity id="example-target" mindar-image-target="targetIndex: 0">
      <a-plane id="example-plane" class="clickable" src="#vid2" width="0.552" height="1" scale = "1.5 1.5 1.5" position="0 0 0" rotation="0 0 0"></a-plane>
    </a-entity>

    <a-entity id="my-target" mindar-image-target="targetIndex: 1">
      <a-plane id="my-plane" class="clickable" src="#vid1" height="0.552" width="1" position="0 0 0" rotation="0 0 0"></a-plane>
    </a-entity>


  </a-scene>
</body> -->